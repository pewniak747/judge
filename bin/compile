#!/bin/bash

SRC_FILE=$1
PROGRAM_NAME=$2
TMP_DIR=tmp
CLEANUP=bin/cleanup
VERIFY=bin/verify

outfile=$TMP_DIR/$PROGRAM_NAME

if [ ! -d $TMP_DIR ]; then
  mkdir $TMP_DIR
fi

if [ ! -e $SRC_FILE ]; then
  printf "\033[31m[source not found]\033[0m\t$PROGRAM_NAME\n"
  exit 3
fi

$VERIFY $SRC_FILE

if [[ $? == 0 ]]; then
  g++ -o $outfile $SRC_FILE
else
  exit 1
fi
